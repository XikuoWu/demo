<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Explore Buses</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="./favicon.png" type="image/x-icon">
    <link rel="stylesheet" href="./index.css">
    <style>
        html {
            width: 100%;
            min-height: 100%;
            /* ← 最关键：让 body 高度撑满浏览器 */
            margin: 0;
            padding: 0;
        }

        #filter-text {
            display: none;
        }

        body {
            margin: 20px;
            font-family: sans-serif;
            background-color: #f5f5f5;
            padding-top: 0;
            margin-top: 0;
            background-image: url(./img/newflyerxn402.jpg);
            background-repeat: no-repeat;
            background-size: cover;
            background-position: center center;
            min-height: 100%;
            /* ← 最关键：让 body 高度撑满浏览器 */
        }

        #bus-info {
            margin-top: 30px;
            background: #fff;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
            display: none;
            max-width: 900px;
            margin-left: auto;
            margin-right: auto;
        }

        #bus-title {
            margin-top: 0;
            font-size: 28px;
            color: #333;
        }

        #bus-main-img {
            width: 100%;
            max-width: 600px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .bus-sub-img {
            width: 280px;
            /* 现有宽度 */
            height: 180px;
            /* 新增：你希望的统一高度 */
            object-fit: contain;
            /* 裁切溢出的部分，保证铺满框 */
            border-radius: 6px;
            margin-bottom: 10px;
            background-color: #000;
        }

        #bus-seat-map {
            width: 90%;
            border-radius: 6px;
        }

        #bus-specs {
            list-style: none;
            padding-left: 0;
        }

        #bus-specs li {
            margin-bottom: 6px;
        }

        .image-center-container {
            text-align: center;
            margin-bottom: 20px;
        }

        #busmodalselect {
            padding: 5px;
            border-radius: 4px;
            font-weight: 100;
            font-style: italic;
            max-height: 30px;
            border: 0.3px black solid;
            outline: none;
        }

        .selectcontainer {
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: deepskyblue;
            border-bottom-left-radius: 10px;
            border-bottom-right-radius: 10px;
            max-width: 100%;
        }

        .header-outer {
            display: flex;
            justify-content: center;
        }

        header {
            width: 90%;
            height: 70px;
            background-color: deepskyblue;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-top-right-radius: 0;
            border-top-left-radius: 0;
        }

        .logo {
            height: 55px;
            margin-left: 34px;
        }

        header p {
            font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;
            font-size: larger;
        }

        .header-inner a {
            margin: 15px;
            font-size: larger;
            text-decoration: none;
            color: black;
            font-family: Arial, Helvetica, sans-serif;
        }

        .main-navigation:hover {
            color: rgb(98, 98, 98);
        }

        .header-outer {
            display: flex;
            justify-content: center;
        }

        header {
            width: 90%;
            height: 70px;
            background-color: deepskyblue;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-top-right-radius: 0;
            border-top-left-radius: 0;
        }

        .logo {
            height: 55px;
            margin-left: 34px;
        }

        header p {
            font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;
            font-size: larger;
        }

        .header-inner a {
            margin: 15px;
            font-size: larger;
            text-decoration: none;
            color: black;
            font-family: Arial, Helvetica, sans-serif;
        }

        .main-navigation:hover {
            color: rgb(98, 98, 98);
        }

        .body-container {
            color: white;
            font-size: larger;
            font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;
            font-weight: bold;
            top: 480px;
            position: fixed;
            left: 210px;
        }

        .explore-buses {
            text-decoration: none;
            font-size: larger;
            background-color: deepskyblue;
            padding: 15px;
            color: white;
            border-radius: 7px;
        }

        .explore-buses:hover {
            background-color: rgb(0, 136, 255);
        }

        .navigation-container {
            display: flex;
        }

        .logo-container {
            display: flex;
        }

        select {
            padding: 8px;
            border-radius: 5px;
            background-color: transparent;
            outline: none;
        }

        /*  */
        .h1container {
            display: flex;
            justify-content: center;
            font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;
        }

        .main-container {
            display: flex;
            justify-content: center;
        }

        .main {
            width: 100%;
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            padding: 10px;
            border-top-left-radius: 13px;
            border-top-right-radius: 13px;
        }

        .bus {
            width: calc(50% - 10px);
            height: 400px;
            border-radius: 10px;
            padding: 10px;
            box-sizing: border-box;
            cursor: pointer;
            border: 0.3px black solid;
        }

        /* 🟦 响应式布局 - 小于850px时每行显示1个bus */
        @media screen and (max-width: 850px) {
            .bus {
                width: 100%;
            }

            body {
                background-image: url(./img/newflyerxn40.jpg);
                background-repeat: no-repeat;
                background-size: cover;
                background-position: center center;
                min-height: 100%;
            }
        }

        .bus-img {
            width: 60%;
        }

        .bus a {
            display: flex;
            justify-content: center;
        }

        .bus h4 {
            text-align: center;
        }

        .stock {
            color: rgb(0, 180, 0);
            margin-top: -11px;
        }

        .buy-btn {
            text-decoration: none;
            margin-top: -11px;
            color: black;
            font-size: larger;
            border: 0.3px black solid;
            padding: 3px;
            border-radius: 5px;
            width: 60%;
        }

        .buy-btn-container {
            display: flex;
            justify-content: center;
            cursor: pointer;
        }

        .buy-btn:hover {
            background-color: rgb(227, 227, 227);
            cursor: pointer;
        }

        .bus div {
            display: flex;
            justify-content: center;
        }

        #modalExtraImages {
            width: 100%;
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            padding: 10px;
        }

        #modalExtraImages .image-box {
            width: 350px;
            height: 220px;
            background-color: black;
            /* 黑边 */
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 10px;
        }

        #modalExtraImages .image-box img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            /* 保证完整显示、等比缩放 */
            border-radius: 5px;
        }

        #prev:hover,
        #next:hover {
            background-color: rgb(245, 245, 245);
        }

        /* btn-animation */
        @keyframes slideFromLeft {
            from {
                opacity: 0;
                transform: translateX(-200px);
            }

            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes slideFromRight {
            from {
                opacity: 0;
                transform: translateX(200px);
            }

            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .slide-left {
            animation: slideFromLeft 1.5s ease;
        }

        .slide-right {
            animation: slideFromRight 1.5s ease;
        }

        .selectcontainer {
            display: flex;
            justify-content: center;
            align-items: center;
            flex-wrap: nowrap;
            gap: 10px;
            padding: 10px;
            flex-direction: row;
            text-align: center;
        }

        .selectcontainer2 {
            display: flex;
            justify-content: center;
            max-width: 100%;
        }

        .selectcontainer h1 {
            font-size: 1.5rem;
            margin: 0 10px;
        }

        .select-row {
            display: flex;
            align-items: center;
            gap: 10px;
            flex-wrap: nowrap;
        }

        #busmodelselect {
            padding: 5px;
            border-radius: 4px;
            font-style: italic;
            text-align: center;
            min-width: 180px;
        }

        #prev,
        #next {
            background-color: white;
            padding: 10px;
            font-size: 18px;
            border: 0.3px black solid;
            border-radius: 50%;
            cursor: pointer;
            min-width: 40px;
        }

        /* 小屏幕优化 */
        @media (max-width: 768px) {
            .selectcontainer {
                flex-direction: row;
                align-items: center;
            }

            .selectcontainer h1 {
                margin-bottom: 10px;
            }

            #busmodelselect {
                width: 70vw;
                margin-bottom: 10px;
            }

            #prev,
            #next {
                margin: 0 15px;
            }

            /* 添加新容器包裹按钮 */
            .button-row {
                display: flex;
                justify-content: center;
                gap: 20px;
                margin-top: 5px;
            }
        }

        @media (max-width: 900px) {
            .ourbush1 {
                display: none;
            }

            .button-row {
                display: none;
            }

            .button-row {
                display: none;
            }

            .ourbush1 {
                display: none;
            }

            #busmodelselect {
                max-width: 180px;
            }
        }

        #bus-info a:hover {
            background-color: #f0f0f0;
        }

        #filter {
            font-size: larger;
            padding: 5px;
            margin: 3px;
            border: 0.3px black solid;
            border-radius: 5px;
            cursor: pointer;
            position: relative;
        }

        #filter:hover {
            background-color: rgb(0, 170, 255);
        }

        #filter-dropdown {
            z-index: 1000;
            margin-top: -65px;
        }

        .clearall {
            background-color: white;
        }

        .clearall:hover {
            background-color: rgb(227, 227, 227);
        }

        .header-outer {
            position: sticky;
            top: 0;
            z-index: 1000;
            /* 确保在其它内容上层 */
        }

        .selectcontainer2 {
            position: sticky;
            top: 70px;
            /* header 的高度 */
            z-index: 999;
        }

        /* 基础按钮样式 */
        /* 按钮样式 */
        .filter-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 6px 10px;
            border: 1px solid black;
            border-radius: 6px;
            background-color: transparent;
            cursor: pointer;
            font-size: 10px;
            font-weight: 600;
            gap: 6px;
            transition: background-color 0.2s ease;
            height: 30px;
        }

        /* 图标样式 */
        #filter-icon {
            width: 20px;
            margin-top: 2px;
        }

        /* 默认隐藏文字（大屏显示图标） */
        #filter-text {
            display: none;
        }

        /* 小屏幕时：隐藏图标，显示文字 */
        @media (max-width: 768px) {
            .filter-btn {
                transform: translateY(-5px);
            }

            #filter-dropdown {
                display: flex;
                justify-self: center;
                transform: translateX(-250px);
                min-width: 90%;
            }
        }

        @media (max-width: 400px) {
            #filter-dropdown {
                display: flex;
                justify-self: center;
                transform: translateX(-250px);
                min-width: 90%;
            }
        }

        @media (max-width: 1425px) {
            #filter-dropdown {
                display: flex;
                justify-self: center;
                transform: translateX(-550px);
                min-width: 50%;
            }
        }

        @media (max-width: 1094px) {
            #filter-dropdown {
                display: flex;
                justify-self: center;
                transform: translateX(-350px);
                min-width: 40%;
            }
        }

        @media (max-width: 900px) {
            #filter-dropdown {
                display: flex;
                justify-self: center;
                transform: translateX(-250px);
                min-width: 35%;
            }
        }

        @media (max-width: 840px) {
            .selectcontainer2 {
                min-width: 70%;
            }
        }

        @media (max-width: 720px) {
            #filter-dropdown {
                display: flex;
                justify-self: center;
                transform: translateX(-250px);
                min-width: 75%;
            }
        }
    </style>
</head>

<body>
    <div class="header-outer">
        <header>
            <div class="logo-container">
                <a href="./index.html"><img src="./favicon.png" alt="" class="logo"></a>&nbsp;&nbsp;&nbsp;&nbsp;<p>Koala
                    Bus</p>
            </div>

            <div class="navigation-container" id="navContainer">
                <div class="explore header-inner"><a class="main-navigation" href="./explore.html">Explore Buses</a>
                </div>
                <div class="buy header-inner"><a class="main-navigation" href="./Buy.html">Buy Buses</a></div>
                <div class="show header-inner"><a class="main-navigation" href="./shows.html">Bus Shows</a></div>
                <div class="cool header-inner"><a class="main-navigation" href="./cool.html">Record Buses</a></div>
                <div class="privacy header-inner"><a class="main-navigation" href="./polocy.html">Privacy Polocy</a>
                </div>
            </div>
        </header>
    </div>

    <div class="selectcontainer2">
        <div class="selectcontainer">
            <h1 class="ourbush1">Our Bus Models:</h1>
            <select id="busmodelselect" name="nus_model">
                <option value="" disabled selected>--- Our Bus Models ---</option>
                <option value="novabuslfscng">Novabus LFS CNG</option>
                <option value="novabuslfsdiesel">Novabus LFS Diesel</option>
                <option value="novabuslfse">Novabus LFSe</option>
                <option value="novabuslfsartic">Novabus LFS Artic Diesel</option>
                <option value="novabuslfsartichev">Novabus LFS Artic HEV</option>
                <option value="novabuslfshev">Novabus LFS HEV</option>
                <option value="novabuslfx">Novabus LFX Articulated</option>
                <option value="newflyerxn40">New Flyer XN40</option>
                <option value="newflyerxn60">New Flyer XN60</option>
                <option value="newflyerxn35">New Flyer XN35</option>
                <option value="newflyerxd40">New Flyer XD40</option>
                <option value="newflyerxd60">New Flyer XD60</option>
                <option value="newflyerxd35">New Flyer XD35</option>
                <option value="newflyerd40lf">New Flyer D40LF</option>
                <option value="newflyerd60lf">New Flyer D60LF</option>
                <option value="newflyerd35lf">New Flyer D35LF</option>
                <option value="newflyerd30lf">New Flyer D30LF</option>
                <option value="newflyerd40lfr">New Flyer D40LFR</option>
                <option value="newflyerd60lfr">New Flyer D60LFR</option>
                <option value="newflyerd35lfr">New Flyer D35LFR</option>
                <option value="newflyerde40lfr">New Flyer DE40LFR</option>
                <option value="newflyerde60lfr">New Flyer DE60LFR</option>
                <option value="newflyerde35lfr">New Flyer DE35LFR</option>
                <option value="newflyerde40lf">New Flyer DE40LF</option>
                <option value="newflyerde60lf">New Flyer DE60LF</option>
                <option value="newflyerde35lf">New Flyer DE35LF</option>
                <option value="newflyerxde35">New Flyer XDE35</option>
                <option value="newflyerxde40">New Flyer XDE40</option>
                <option value="newflyerxde60">New Flyer XDE60</option>
                <option value="newflyerxhe40">New Flyer XHE40</option>
                <option value="newflyerxhe60">New Flyer XHE60</option>
                <option value="newflyerxhe35">New Flyer XHE35</option>
                <option value="newflyere40lf">New Flyer E40LF</option>
                <option value="newflyere40lfr">New Flyer E40LFR</option>
                <option value="newflyere60lf">New Flyer E60LF</option>
                <option value="newflyere60lfr">New Flyer E60LFR</option>
                <option value="newflyerxe40">New Flyer XE40</option>
                <option value="newflyerxe60">New Flyer XE60</option>
                <option value="newflyerxe35">New Flyer XE35</option>
                <option value="newflyerxh35">New Flyer XH35</option>
                <option value="newflyerxh40">New Flyer XH40</option>
                <option value="newflyerxh60">New Flyer XH60</option>
                <option value="newflyerc40lf">New Flyer C40LF</option>
                <option value="newflyerc40lfr">New Flyer C40LFR</option>
                <option value="newflyerc60lfr">New Flyer C60LFR</option>
                <option value="newflyerc35lf">New Flyer C35LF</option>
                <option value="newflyerc30lf">New Flyer C30LF</option>
                <option value="newflyerc35lfr">New Flyer C35LFR</option>
                <option value="newflyerh40lf">New Flyer H40LF</option>
                <option value="newflyerh40lfr">New Flyer H40LFR</option>
                <option value="newflyerxt40">New Flyer XT40</option>
                <option value="newflyerxt60">New Flyer XT60</option>
                <option value="encezriderii">ENC EZ Rider II</option>
                <option value="grandewestvicinity">Grande West Vicinity Diesel</option>
                <option value="grandewestvicinitycng">Grande West Vicinity CNG</option>
                <option value="electricversiongrandewestvicinity">Electric Version Grande West Vicinity</option>
                <option value="proterrazx5max">Proterra ZX5 MAX</option>
                <option value="zk6105bev">Huanghai ZK6105BEV</option>
                <option value="zk6850bevg">Huanghai ZK6850BEVG</option>
                <option value="gtq6126bevbt">Yuton GTQ6126BEVBT</option>
                <option value="zk6125bev">Huanghai ZK6125BEV</option>
                 <option value="dd6141s05">Huanghai DD6141S05</option>
                <option value="dd6181s01">Huanghai DD6181S01</option>
                <option value="dd6181b01n">Huanghai DD6181B01N</option>
                <option value="dd6180s01">Huanghai DD6180S01</option>
                <option value="dd6129s58">Huanghai DD6129S58</option>
                <option value="dd6109">Huanghai DD6109</option>
                <option value="dd6129s71">Huanghai DD6129S71</option>
                <option value="teg6125bev03">Huanghai TEG6125BEV03</option>
                <option value="teg6591bev01">Huanghai TEG6591BEV01</option>
                <option value="volvo7900electric">Volvo 7900 Electric</option>
                <option value="volvo7900electricarculated">Volvo 7900 Electric Arculated</option>
                <option value="scaniacitywidele">Scania Citywide LE</option>
                <option value="solarisurbino18electric">Solaris Urbino 18 Electric</option>
                <option value="mercedesbenzecitarog">Mercedes-Benz eCitaro G</option>
                <option value="mercedesbenzcapacityl">Mercedes-Benz CapaCity L</option>
                <option value="alexanderdennisenviro500mmc">Alexander Dennis Enviro 500 MMC</option>
                <option value="alexanderdennisenviro500">Alexander Dennis Enviro 500</option>
                <option value="alexanderdennisenviro400ev">Alexander Dennis Enviro 400 EV</option>
                <option value="alexanderdennisenviro400">Alexander Dennis Enviro 400</option>
                <option value="alexanderdennisenviro500ev">Alexander Dennis Enviro 500 EV</option>
                <option value="alexanderdennisenviro100">Alexander Dennis Enviro 100</option>
                <option value="alexanderdennisenviro100ev">Alexander Dennis Enviro 100 EV</option>
                <option value="bydbd11">BYD BD11</option>
                <option value="bydk12a">BYD K12A</option>
                <option value="arbocfreedom">Arboc Freedom (Diesel)</option>
                <option value="arbocmobility">Arboc Mobility (Diesel)</option>
                <option value="arbocindependence">Arboc Independence (Gasoline)</option>
                <option value="arbocsof">Arboc Spirit of Freedom(Gasoline)</option>
                <option value="arbocsom">Arboc Spirit of Mobility(Gasoline)</option>
                <option value="dupontchamplain1608lowfloor">Dupont Champlain 1608 Low Floor</option>
                <option value="youngmannjp6280g">Youngman JNP6280G</option>
                <option value="vanhoolagg300">Van Hool AGG300</option>
                <option value="autotramextragrand">AutoTram Extra Grand</option>
                <option value="manlionscityddla95">MAN Lions City DD L A95 3-door</option>
                <option value="klq6181gql5">KLQ6181GQL5</option>
                <option value="gtq6123">GTQ 6123</option>
                <option value="njl6129gsev1">Yuton NJL6129GSEV1</option>
                <option value="zk6180bevg31">Yuton ZK6180BEVG31</option>
                <option value="lck6180shev">Yuton LCK6180SHEV</option>
                <option value="klq6129y">KLQ 6129Y (Coach Bus)</option>
                <option value="zk6122h9">Yuton ZK6122H9 (Coach Bus)</option>
                <option value="zk6129h">Yuton ZK6129H (Coach Bus)</option>
                <option value="zk6119h">Yuton ZK6119H (Coach Bus)</option>
                <option value="zhongtongbuselegance">Zhongtong Bus Elegance (Coach Bus)</option>
                <option value="xml6601">XML 6601 (Coach Bus)</option>
                <option value="xml6602">XML 6602 (Coach Bus)</option>
                <option value="mercedesbenztourrider">Mercedes-Benz Tourrider (Coach Bus)</option>
                <option value="zk6122hd9">Yuton ZK6122HD9 (Coach Bus)</option>
                <option value="neoplanjumbocruiser">Neoplan Jumbocruiser (Coach Bus)</option>
                <option value="neoplanskyliner">Neoplan Skyliner (Coach Bus)</option>
                <option value="neoplanskylinerexpress">Neoplan Skyliner Express (Coach Bus)</option>
                <option value="neoplanmegaliner">Neoplan Megaliner (Coach Bus)</option>
                <option value="neoplantourliner">Neoplan Tourliner (Coach Bus)</option>
                <option value="neoplancityliner">Neoplan Cityliner (Coach Bus)</option>
                <option value="mcid4505arculatedcoach">MCI D4505 Articulated Coach (Coach Bus)</option>
                <option value="astromegatd824">TD824 Astromega (Coach Bus)</option>
                <option value="volvo9900articulated">Volvo 9900 Articulated (Coach Bus)</option>
                <option value="setras431dt">Setra S431 DT (Coach Bus)</option>
                <option value="shenlonglck6600fcev3">Shenlong LCK6600FCEV3 (Coach Bus)</option>
            </select>
            <div class="button-row">
                <button style="background-color: transparent;" id="prev">﹤</button>
                <button style="background-color: transparent;" id="next">﹥</button>
            </div>
            <button id="filter" class="filter-btn">
                <img id="filter-icon" src="./filtericon.png" alt="Filter icon">
            </button>

            <div class="fdc">
                <div id="filter-dropdown" style="display: none; position: fixed; background-color: white; border: 1px solid #ccc; padding: 10px; border-radius: 5px; margin-top: 5px;">
                    <div id="energytype">
                        Propulsion:
                        <label><input id="electric" type="radio" name="energy">Electric</label>&nbsp;&nbsp;
                        <label><input id="diesel" type="radio" name="energy">Diesel</label>&nbsp;&nbsp;
                        <label><input id="cng" type="radio" name="energy">CNG</label>&nbsp;&nbsp;
                        <label><input id="hydrogen" type="radio" name="energy">Hydrogen</label>&nbsp;&nbsp;
                        <label><input id="hybrid" type="radio" name="energy">Hybrid</label>&nbsp;&nbsp;
                        <label><input id="gasoline" type="radio" name="energy">Gasoline</label>&nbsp;&nbsp;
                    </div><br>
                    <div style="margin-right: 10px;" id="carriages">
                        Bus Type:
                        <label><input id="tiny" type="radio" name="carriages">Tiny-Normal</label>&nbsp;&nbsp;
                        <label><input id="nonarticulated" type="radio" name="carriages">Normal</label>&nbsp;&nbsp;
                        <label><input id="doubledecker" type="radio" name="carriages">Double-decker</label>&nbsp;&nbsp;
                        <label><input id="articulated" type="radio" name="carriages">Articulated</label>&nbsp;&nbsp;
                        <label><input id="tripledecker" type="radio" name="carriages">Triple-Decker</label>&nbsp;&nbsp;
                        <label><input id="doubledeckerarticulated" type="radio" name="carriages">Double-decker-Articulated</label>&nbsp;&nbsp;
                        <label><input id="tripledeckerarticulated" type="radio" name="carriages">Triple-decker-Articulated</label>&nbsp;&nbsp;
                        <label><input id="trolley" type="radio" name="carriages">Trolley</label>&nbsp;&nbsp;
                    </div><br>
                    <div style="margin-right: 10px;" id="price">
                        Price (CA):
                        <label><input id="lowest" type="radio" name="price">$3599 to $300,000</label>&nbsp;&nbsp;
                        <label><input id="secondlowest" type="radio" name="price">$300,000 to $500,000</label>&nbsp;&nbsp;
                        <label><input id="secondhighest" type="radio" name="price">$500,000 to $700,000</label>&nbsp;&nbsp;
                        <label><input id="highest" type="radio" name="price">$700,000 to $999,999</label>&nbsp;&nbsp;
                    </div><br>
                    <button class="clearall" style="border: 0.3px black solid; padding: 4px; border-radius: 5px;"><a style="text-decoration: none; color: black; font-size: large;" href="">Clear All</a></button>
                </div>
            </div>
        </div>
    </div>

    <div style="margin-top: 5px;" id="bus-info">
        <h2 id="bus-title"></h2>
        <div class="image-center-container">
            <img id="bus-main-img" src="" alt="Main Bus Image">
        </div>
        <div class="image-center-container">
            &nbsp;<img id="bus-sub-img1" class="bus-sub-img" src="" alt="No other picture for this bus yet">&nbsp;
            &nbsp;<img id="bus-sub-img2" class="bus-sub-img" src="" alt="No other picture for this bus yet">&nbsp;
            &nbsp;<img id="bus-sub-img3" class="bus-sub-img" src="" alt="No other picture for this bus yet">&nbsp;
        </div>
        <div class="image-center-container">
            <h3>Seat Map</h3>
            <img id="bus-seat-map" src="" alt="No seat map for this bus yet">
        </div>
        <p id="bus-description"></p>
        <ul id="bus-specs">
            <li><strong>Horsepower:</strong>&nbsp; <span id="bus-horsepower"></span></li>
            <li><strong>Seats:</strong>&nbsp; <span id="bus-seats"></span></li>
            <li><strong>Energy Type:</strong>&nbsp; <span id="bus-energy"></span></li>
            <li><strong>Max Capacity:</strong>&nbsp; <span id="bus-capacity"></span></li>
            <li><strong>Manufacturer:</strong>&nbsp; <span id="bus-manufacturer"></span></li>
            <li><strong>Air Condition&nbsp;(AC):</strong>&nbsp; <span id="bus-air"></span></li>
            <li><strong>Neeling Bus:</strong>&nbsp; <span id="bus-neel"></span></li>
            <li><strong>Max Speed:</strong>&nbsp; <span id="bus-speed"></span></li>
            <li><strong>Range:</strong>&nbsp; <span id="bus-range"></span></li>
            <li><strong>Maximum service life:</strong>&nbsp; <span id="bus-life"></span></li>
            <li><strong>Price&nbsp;(CA):</strong>&nbsp; <span id="bus-price"></span></li>
            <li><strong>Arrive time (In Canada, less than 50 buses):</strong>&nbsp; <span id="bus-timearrive"></span></li>
            <li><strong>Number of buses:</strong>&nbsp; <span style="color: green;" id="bus-num"></span></li>
            <p style="text-align: center; font-size: larger;">All our buses are wheelchair accessible and comply with&nbsp;&nbsp; GJB 9001C-2023&nbsp;&nbsp; standards.</p>
        </ul>

        <div style="display: flex; justify-content: center;" class="acontainer">
            <a style=" display: block;text-decoration: none; color: black; font-size: larger; border: 0.3px black solid; border-radius: 5px; padding: 7px; min-width: 100px; text-align: center;" id="buyButton" class="buy-btn" data-bus="novabuslfscng" href="./Buy.html">Buy</a>
        </div>
    </div>
    <script src="./busData.js"></script>
    <script>
        let lastSelectedIndex = document.getElementById("busmodelselect").selectedIndex;

        function updateNavButtons() {
            prevBtn.disabled = select.selectedIndex === 0;
            nextBtn.disabled = select.selectedIndex === select.options.length - 1;
        }
        

        document.getElementById("busmodelselect").addEventListener("change", function () {
            const select = this;
            const newIndex = select.selectedIndex;
            const selectedValue = select.value;
            const info = busData[selectedValue];

            // 判断方向
            const directionClass = newIndex > lastSelectedIndex ? "slide-right" : "slide-left";
            lastSelectedIndex = newIndex;

            // 应用动画
            infoBox.classList.remove("slide-left", "slide-right");
            void infoBox.offsetWidth; // 触发回流，确保动画重新执行
            infoBox.classList.add(directionClass);

            // 设置内容
            if (info) {
                document.getElementById("bus-info").style.display = "block";
                document.getElementById("bus-title").innerText = info.name;
                document.getElementById("bus-main-img").src = info.mainImg;
                document.getElementById("bus-sub-img1").src = info.subImgs[0];
                document.getElementById("bus-sub-img2").src = info.subImgs[1];
                document.getElementById("bus-sub-img3").src = info.subImgs[2];
                document.getElementById("bus-seat-map").src = info.seatMap;
                document.getElementById("bus-description").innerText = info.description;
                document.getElementById("bus-horsepower").innerText = info.horsepower;
                document.getElementById("bus-seats").innerText = info.seats;
                document.getElementById("bus-energy").innerText = info.energy;
                document.getElementById("bus-capacity").innerText = info.capacity;
                document.getElementById("bus-manufacturer").innerText = info.manufacturer;
                document.getElementById("bus-air").innerText = info.air;
                document.getElementById("bus-price").innerText = info.price;
                document.getElementById("bus-num").innerText = info.num;
                document.getElementById("bus-timearrive").innerText = info.timearrive;
                document.getElementById("bus-speed").innerText = info.speed;
                document.getElementById("bus-range").innerText = info.range;
                document.getElementById("bus-life").innerText = info.life;
                document.getElementById("bus-neel").innerText = info.neel;
            }

            updateNavButtons();
            updateBuyHref();
        });


        // header
        const links = [
            { text: "Explore Buses", url: "./explore.html" },
            { text: "Buy Buses", url: "./Buy.html" },
            { text: "Bus Shows", url: "./shows.html" },
            { text: "Record Buses", url: "./cool.html" },
            { text: "Privacy Polocy", url: "./polocy.html" }
        ];

        function renderNavigation() {
            const navContainer = document.getElementById('navContainer');
            navContainer.innerHTML = ''; // 清空

            if (window.innerWidth < 1070) {
                const select = document.createElement('select');
                select.onchange = (e) => {
                    const selectedUrl = e.target.value;
                    if (selectedUrl) {
                        window.open(selectedUrl, "_blank");
                        // 重置为默认项，防止重复点击无效
                        e.target.selectedIndex = 0;
                    }
                };

                select.style.fontSize = '16px';
                select.style.marginRight = '20px';

                // 默认占位项
                const placeholder = document.createElement('option');
                placeholder.value = '';
                placeholder.textContent = 'Choose a page';
                placeholder.disabled = true;
                placeholder.selected = true;
                select.appendChild(placeholder);

                links.forEach(link => {
                    const option = document.createElement('option');
                    option.value = link.url;
                    option.textContent = link.text;
                    select.appendChild(option);
                });

                navContainer.appendChild(select);
            } else {
                links.forEach(link => {
                    const div = document.createElement('div');
                    div.className = 'header-inner';
                    const a = document.createElement('a');
                    a.href = link.url;
                    a.textContent = link.text;
                    a.className = 'main-navigation';
                    div.appendChild(a);
                    navContainer.appendChild(div);
                });
            }
        }

        // 初始加载
        renderNavigation();
        // 监听窗口大小变化
        window.addEventListener('resize', renderNavigation);

        // button
        const buyButton = document.getElementById('buyButton');
        const busTitleEl = document.getElementById('bus-title');
        const select = document.getElementById("busmodelselect");
        const prevBtn = document.getElementById("prev");
        const nextBtn = document.getElementById("next");
        const infoBox = document.getElementById("bus-info");

        function updateBuyHref() {
            const title = busTitleEl.textContent.trim();
            buyButton.href = `Buy.html?busTitle=${encodeURIComponent(title)}`;
        }

        updateBuyHref();

        function triggerAnimation(directionClass) {
            infoBox.classList.remove("slide-left", "slide-right");
            void infoBox.offsetWidth; // 触发回流
            infoBox.classList.add(directionClass);
        }

        prevBtn.addEventListener("click", () => {
            if (select.selectedIndex > 0) {
                select.selectedIndex -= 1;
                triggerAnimation("slide-left");
                select.dispatchEvent(new Event("change"));
            }
        });

        nextBtn.addEventListener("click", () => {
            if (select.selectedIndex < select.options.length - 1) {
                select.selectedIndex += 1;
                triggerAnimation("slide-right");
                select.dispatchEvent(new Event("change"));
            }
        });

        select.addEventListener("change", updateNavButtons);
        window.addEventListener("DOMContentLoaded", updateNavButtons);

        // filter
        const filter = document.getElementById('filter');
        const dropdown = document.getElementById('filter-dropdown');

        filter.addEventListener('mouseenter', () => {
            const rect = filter.getBoundingClientRect();
            dropdown.style.left = rect.left + 'px';
            dropdown.style.top = (rect.bottom + window.scrollY) + 'px';
            dropdown.style.display = 'block';
        });

        filter.addEventListener('mouseleave', () => {
            setTimeout(() => {
                if (!dropdown.matches(':hover')) {
                    dropdown.style.display = 'none';
                }
            }, 200);
        });

        dropdown.addEventListener('mouseleave', () => {
            dropdown.style.display = 'none';
        });

        dropdown.addEventListener('mouseenter', () => {
            dropdown.style.display = 'block';
        });

        const busModelSelect = document.getElementById('busmodelselect');
        const originalOptions = Array.from(busModelSelect.options);

        // 当前的筛选状态
        let selectedEnergy = null;
        let selectedCarriage = null;
        let selectedPrice = null;

        // 筛选核心逻辑
        function applyFilters() {
            busModelSelect.innerHTML = '';

            const filtered = Object.entries(busData).filter(([key, bus]) => {
                const matchEnergy = selectedEnergy ? bus.energyCategory === selectedEnergy : true;
                const matchCarriage = selectedCarriage ? bus.carriageCategory === selectedCarriage : true;
                const matchPrice = selectedPrice ? bus.priceCategory === selectedPrice : true;
                return matchEnergy && matchCarriage && matchPrice;
            });

            if (filtered.length === 0) {
                const noMatch = document.createElement('option');
                noMatch.text = 'No matching buses';
                noMatch.disabled = true;
                noMatch.selected = true;
                busModelSelect.appendChild(noMatch);

                // ✅ 关键补充：隐藏 bus 信息区域
                document.getElementById("bus-info").style.display = "none";
                return;
            }

            // 添加 placeholder
            const placeholder = document.createElement('option');
            placeholder.text = '--- Select a bus ---';
            placeholder.value = '';
            placeholder.disabled = true;
            placeholder.selected = true;
            busModelSelect.appendChild(placeholder);

            for (const [key, bus] of filtered) {
                const option = document.createElement('option');
                option.value = key;
                option.text = bus.name;
                busModelSelect.appendChild(option);
            }

            // 清除旧选项值
            busModelSelect.selectedIndex = 0;

            // ✅ 同时隐藏旧的 bus 信息（用户还没重新选中前）
            document.getElementById("bus-info").style.display = "none";
        }

        // 添加事件监听
        document.querySelectorAll('#energytype input[type=radio]').forEach(radio => {
            radio.addEventListener('change', () => {
                selectedEnergy = radio.id.toLowerCase();
                applyFilters();
            });
        });

        document.querySelectorAll('#carriages input[type=radio]').forEach(radio => {
            radio.addEventListener('change', () => {
                selectedCarriage = radio.id.toLowerCase();
                applyFilters();
            });
        });

        document.querySelectorAll('#price input[type=radio]').forEach(radio => {
            radio.addEventListener('change', () => {
                selectedPrice = radio.id.toLowerCase();
                applyFilters();
            });
        });

        // 清除全部筛选
        document.querySelector('.clearall')?.addEventListener('click', (e) => {
            e.preventDefault();
            selectedEnergy = null;
            selectedCarriage = null;
            selectedPrice = null;

            // 清除已选中 radio
            document.querySelectorAll('#filter-dropdown input[type=radio]').forEach(radio => {
                radio.checked = false;
            });

            busModelSelect.innerHTML = '';
            const placeholder = document.createElement('option');
            placeholder.text = '--- Select a bus ---';
            placeholder.value = '';
            placeholder.disabled = true;
            placeholder.selected = true;
            busModelSelect.appendChild(placeholder);

            originalOptions.slice(1).forEach(opt => busModelSelect.appendChild(opt.cloneNode(true)));
        });
    </script>
</body>

</html>